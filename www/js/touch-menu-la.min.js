var TouchMenuLA=function(t){var e,n,a,o,i,s="",l=0,r=0,c=0,p=0,d=0,u=function(){e=this,this.isVisible=!1,this.initialize()};return u.prototype.initElements=function(){t.target.style.zIndex=e.getZIndex(),t.target.style.width=e.getMenuWidth()+"px",t.target.style.left=-t.width+"px",a=document.createElement("div"),a.className="tmla-handle",a.style.width=e.getHandleSize()+"px",a.style.right=-e.getHandleSize()+"px",t.target.appendChild(a),t.disableMask||(n=document.createElement("div"),n.className="tmla-mask",document.body.appendChild(n),e.setMaxMaskOpacity(),i=new Hammer(n,null))},u.prototype.touchStartMenu=function(){o.on("panstart panmove",function(t){l=r+t.deltaX,e.changeMenuPos(),d=Math.abs(t.velocity)})},u.prototype.changeMenuPos=function(){l<=t.width&&(t.target.className=s+" tmla-menu",t.target.style.transform="translate3d("+l+"px, 0, 0)",t.target.style.WebkitTransform="translate3d("+l+"px, 0, 0)",t.target.style.MozTransform="translate3d("+l+"px, 0, 0)",t.disableMask||this.setMaskOpacity(l))},u.prototype.setMaskOpacity=function(e){var a=parseFloat(e/t.width*t.maxMaskOpacity);n.style.opacity=a,0===a?n.style.zIndex=-1:n.style.zIndex=t.zIndex-1},u.prototype.touchEndMenu=function(){o.on("panend pancancel",function(t){r=t.deltaX,e.checkMenuState(t.deltaX)})},u.prototype.eventStartMask=function(){i.on("panstart panmove",function(n){n.center.x<=t.width&&e.isVisible&&(p++,1==p&&(c=n.deltaX),n.deltaX<0&&(l=n.deltaX-c+t.width,e.changeMenuPos(),d=Math.abs(n.velocity)))})},u.prototype.eventEndMask=function(){i.on("panend pancancel",function(t){e.checkMenuState(t.deltaX),p=0})},u.prototype.clickMaskClose=function(){n.addEventListener("click",function(){e.close()})},u.prototype.checkMenuState=function(t){d>=1?t>=0?e.open():e.close():l>=100?e.open():e.close()},u.prototype.open=function(){t.target.className=s+" tmla-menu opened",t.target.style.transform="translate3d("+t.width+"px, 0, 0)",t.target.style.WebkitTransform="translate3d("+t.width+"px, 0, 0)",t.target.style.MozTransform="translate3d("+t.width+"px, 0, 0)",r=t.width,this.isVisible=!0,e.showMask(),e.invoke(t.onOpen)},u.prototype.close=function(){t.target.className=s+" tmla-menu closed",r=0,e.isVisible=!1,e.hideMask(),e.invoke(t.onClose)},u.prototype.toggle=function(){e.isVisible?e.close():e.open()},u.prototype.showMask=function(){n.className="tmla-mask transition",n.style.opacity=t.maxMaskOpacity,n.style.zIndex=t.zIndex-1},u.prototype.hideMask=function(){n.className="tmla-mask transition",n.style.opacity=0,n.style.zIndex=-1},u.prototype.setMenuClassName=function(){s=t.target.className},u.prototype.getMenuWidth=function(){return t.width||(t.width=280),t.width},u.prototype.getZIndex=function(){return t.zIndex||(t.zIndex=99999),t.zIndex},u.prototype.getHandleSize=function(){return t.handleSize||(t.handleSize=20),t.handleSize},u.prototype.getDisableSlide=function(){return t.disableSlide||(t.disableSlide=!1),t.handleSize},u.prototype.setMaxMaskOpacity=function(){return t.maxMaskOpacity||(t.maxMaskOpacity=.5),t.maxMaskOpacity},u.prototype.invoke=function(t){t&&t.apply(e)},u.prototype.initialize=function(){t.target?(o=Hammer(t.target,null),e.setMenuClassName(),e.initElements(),t.disableSlide||(e.touchStartMenu(),e.touchEndMenu(),e.eventStartMask(),e.eventEndMask()),e.clickMaskClose()):console.error("TouchMenuLA: The option 'target' is required.")},new u};